<!--
  This file is part of the "FnordMetric" project
    Copyright (c) 2015 Laura Schlimmer
    Copyright (c) 2015 Paul Asmuth, Google Inc.

  FnordMetric is free software: you can redistribute it and/or modify it under
  the terms of the GNU General Public License v3.0. You should have received a
  copy of the GNU General Public License along with this program. If not, see
  <http://www.gnu.org/licenses/>.
-->
<template id='fn-date-select-base-tpl'>
  <fn-date-select-field>
  </fn-date-select-field>

  <fn-date-select-widget>
    <fn-date-select-inner>

      <fn-calendar-group></fn-calendar-group>

      <fn-date-select-controls>

        <fn-date-select-input-header>Date Range</fn-date-select-input-header>
        <fn-dropdown class='input'>
        </fn-dropdown>

        <div style='clear: both'></div>

        <fn-date-select-container>
          <input class='fn-input fn-date-select-highlight' readonly data-action='date-select_from' />
          <fn-date-select-separator>&#45;</fn-date-select-separator>
          <input class='fn-input' readonly data-action='date-select_until' />
        </fn-date-select-container>

        <fn-button data-action='date-select-cancel'>Cancel</fn-button>
        <fn-button data-action='date-select-apply'>Apply</fn-button>

      </fn-date-select-controls>

    </fn-date-select-inner>
  </fn-date-select-widget>

</template>

<script type-'text/javascript'>
  var DateSelect = function() {
    this.createdCallback = function() {
      console.log("date select");
      var tpl = Fnord.getTemplate('fn-date-select', 'base');
      this.appendChild(tpl);

      this.init();
    }

    this.init = function() {
      var _this = this;
      this.querySelector("fn-date-select-field").onclick = function() {
        _this.showWidget();
      }
    }

    this.showWidget = function() {
      this.querySelector("fn-date-select-widget").setAttribute('data-active', 'active');
    }
  };

  window.addEventListener('fn-ready', function() {
    Fnord.registerComponent('fn-date-select', DateSelect);
  });
</script>
