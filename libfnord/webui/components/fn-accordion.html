<!--
  This file is part of the "FnordMetric" project
    Copyright (c) 2014 Laura Schlimmer
    Copyright (c) 2014 Paul Asmuth, Google Inc.

  FnordMetric is free software: you can redistribute it and/or modify it under
  the terms of the GNU General Public License v3.0. You should have received a
  copy of the GNU General Public License along with this program. If not, see
  <http://www.gnu.org/licenses/>.
-->
<template id='fn-accordion-base-tpl'>
</template>
<script type='text/javascript'>
  var AccordionComponent = function() {
    this.createdCallback = function() {
      var items = this.querySelectorAll('fn-accordion-item');
      var base = this;
      for (var i = 0; i < items.length; i++) {
        items[i].onclick = function() {
          if (this.hasAttribute('data-active')) {
            this.removeAttribute('data-active');
          } else {
            var active_item = base.querySelector('fn-accordion-item[data-active]');
            if (active_item != null) {
              active_item.removeAttribute('data-active');
            }
            this.setAttribute('data-active', 'active');
          }
        }
      }
    }
  }

  window.addEventListener('fn-ready', function() {
    Fnord.registerComponent('fn-accordion', AccordionComponent);
  }, false);
</script>
